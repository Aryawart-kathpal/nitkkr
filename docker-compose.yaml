version: '3.9'
services:
  postgres:
    image: isac:1.0
    build:
      context: ./database
    container_name: 'isac'
    ports:
      - 5432:5432
    environment:
      - POSTGRES_USER=$POSTGRES_USER
      - POSTGRES_PASSWORD=$POSTGRES_PASSWORD
      - POSTGRES_DB=$POSTGRES_DATABASE
  typesense:
    image: typesense/typesense:26.0
    restart: on-failure
    ports:
      - '$TYPESENSE_PORT:$TYPESENSE_PORT'
    volumes:
      - ./typesense-data:/data
    command: '--data-dir /data --api-key=$TYPESENSE_API_KEY --enable-cors'
